<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Arabic Alphabet Cards</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    .card-container {
      perspective: 1000px;
    }
    
    .card {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    
    .card.flipped {
      transform: rotateY(180deg);
    }
    
    .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 1.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    .card-back {
      transform: rotateY(180deg);
    }
    
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    
    .bounce {
      animation: bounce 0.5s ease;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full overflow-auto"></div>
  <script>
    const defaultConfig = {
      background_color: "#FFF5E6",
      card_color: "#FFFFFF",
      primary_button_color: "#FF6B9D",
      secondary_button_color: "#4ECDC4",
      text_color: "#2C3E50",
      game_title: "Arabic Alphabet Adventure ðŸŒŸ",
      instruction_text: "Click the card to see the letter! Learn all 28 letters.",
      flip_button_text: "Flip Card ðŸ”„",
      next_button_text: "Next Letter âž¡ï¸",
      prev_button_text: "â¬…ï¸ Previous",
      font_family: "Arial",
      font_size: 16
    };

    const arabicLetters = [
      { letter: "Ø§", name: "Alif", transliteration: "a", image: "ðŸŒ™" },
      { letter: "Ø¨", name: "Ba", transliteration: "b", image: "ðŸ¦‹" },
      { letter: "Øª", name: "Ta", transliteration: "t", image: "â­" },
      { letter: "Ø«", name: "Tha", transliteration: "th", image: "ðŸŒº" },
      { letter: "Ø¬", name: "Jeem", transliteration: "j", image: "ðŸŒˆ" },
      { letter: "Ø­", name: "Ha", transliteration: "h", image: "ðŸŽ¨" },
      { letter: "Ø®", name: "Kha", transliteration: "kh", image: "ðŸŽª" },
      { letter: "Ø¯", name: "Dal", transliteration: "d", image: "ðŸŽµ" },
      { letter: "Ø°", name: "Thal", transliteration: "dh", image: "ðŸŒ»" },
      { letter: "Ø±", name: "Ra", transliteration: "r", image: "ðŸŽ" },
      { letter: "Ø²", name: "Zay", transliteration: "z", image: "ðŸŒ¸" },
      { letter: "Ø³", name: "Seen", transliteration: "s", image: "â˜€ï¸" },
      { letter: "Ø´", name: "Sheen", transliteration: "sh", image: "âœ¨" },
      { letter: "Øµ", name: "Sad", transliteration: "s", image: "ðŸŽ€" },
      { letter: "Ø¶", name: "Dad", transliteration: "d", image: "ðŸŒŸ" },
      { letter: "Ø·", name: "Ta", transliteration: "t", image: "ðŸŽ­" },
      { letter: "Ø¸", name: "Za", transliteration: "z", image: "ðŸŽª" },
      { letter: "Ø¹", name: "Ayn", transliteration: "'", image: "ðŸ¦„" },
      { letter: "Øº", name: "Ghayn", transliteration: "gh", image: "ðŸŒº" },
      { letter: "Ù", name: "Fa", transliteration: "f", image: "ðŸŽ¨" },
      { letter: "Ù‚", name: "Qaf", transliteration: "q", image: "ðŸŽ¯" },
      { letter: "Ùƒ", name: "Kaf", transliteration: "k", image: "ðŸŽˆ" },
      { letter: "Ù„", name: "Lam", transliteration: "l", image: "ðŸŒˆ" },
      { letter: "Ù…", name: "Meem", transliteration: "m", image: "ðŸŽµ" },
      { letter: "Ù†", name: "Noon", transliteration: "n", image: "ðŸŒ™" },
      { letter: "Ù‡", name: "Ha", transliteration: "h", image: "â­" },
      { letter: "Ùˆ", name: "Waw", transliteration: "w", image: "ðŸ¦‹" },
      { letter: "ÙŠ", name: "Ya", transliteration: "y", image: "ðŸŒ»" }
    ];

    let currentIndex = 0;
    let isFlipped = false;

    async function onConfigChange(config) {
      const app = document.getElementById('app');
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'Arial, sans-serif';
      const baseSize = config.font_size || defaultConfig.font_size;
      
      app.style.background = config.background_color || defaultConfig.background_color;
      app.style.fontFamily = `${customFont}, ${baseFontStack}`;
      
      const titleEl = document.getElementById('game-title');
      if (titleEl) {
        titleEl.textContent = config.game_title || defaultConfig.game_title;
        titleEl.style.color = config.text_color || defaultConfig.text_color;
        titleEl.style.fontSize = `${baseSize * 2}px`;
      }
      
      const instructionEl = document.getElementById('instruction-text');
      if (instructionEl) {
        instructionEl.textContent = config.instruction_text || defaultConfig.instruction_text;
        instructionEl.style.color = config.text_color || defaultConfig.text_color;
        instructionEl.style.fontSize = `${baseSize * 1.125}px`;
      }
      
      const flipBtn = document.getElementById('flip-btn');
      if (flipBtn) {
        flipBtn.textContent = config.flip_button_text || defaultConfig.flip_button_text;
        flipBtn.style.background = config.primary_button_color || defaultConfig.primary_button_color;
        flipBtn.style.fontSize = `${baseSize * 1.125}px`;
      }
      
      const nextBtn = document.getElementById('next-btn');
      if (nextBtn) {
        nextBtn.textContent = config.next_button_text || defaultConfig.next_button_text;
        nextBtn.style.background = config.secondary_button_color || defaultConfig.secondary_button_color;
        nextBtn.style.fontSize = `${baseSize}px`;
      }
      
      const prevBtn = document.getElementById('prev-btn');
      if (prevBtn) {
        prevBtn.textContent = config.prev_button_text || defaultConfig.prev_button_text;
        prevBtn.style.background = config.secondary_button_color || defaultConfig.secondary_button_color;
        prevBtn.style.fontSize = `${baseSize}px`;
      }
      
      const cardFronts = document.querySelectorAll('.card-front');
      const cardBacks = document.querySelectorAll('.card-back');
      
      cardFronts.forEach(card => {
        card.style.background = config.card_color || defaultConfig.card_color;
      });
      
      cardBacks.forEach(card => {
        card.style.background = config.card_color || defaultConfig.card_color;
      });
      
      const letterElements = document.querySelectorAll('.letter-display');
      letterElements.forEach(el => {
        el.style.color = config.text_color || defaultConfig.text_color;
        el.style.fontSize = `${baseSize * 9}px`;
      });
      
      const nameElements = document.querySelectorAll('.letter-name');
      nameElements.forEach(el => {
        el.style.color = config.text_color || defaultConfig.text_color;
        el.style.fontSize = `${baseSize * 1.5}px`;
      });
      
      const transElements = document.querySelectorAll('.transliteration');
      transElements.forEach(el => {
        el.style.color = config.text_color || defaultConfig.text_color;
        el.style.fontSize = `${baseSize * 1.25}px`;
      });
      
      const progressEl = document.getElementById('progress-text');
      if (progressEl) {
        progressEl.style.color = config.text_color || defaultConfig.text_color;
        progressEl.style.fontSize = `${baseSize * 1.125}px`;
      }
    }

    function renderApp() {
      const app = document.getElementById('app');
      const config = window.elementSdk.config;
      const currentLetter = arabicLetters[currentIndex];
      
      app.innerHTML = `
        <div class="w-full" style="min-height: 100%; padding: 2rem; display: flex; flex-direction: column; align-items: center; justify-content: center;">
          <h1 id="game-title" class="font-bold text-center mb-4">${config.game_title || defaultConfig.game_title}</h1>
          
          <p id="instruction-text" class="text-center mb-6">${config.instruction_text || defaultConfig.instruction_text}</p>
          
          <div class="card-container mb-8" style="width: 100%; max-width: 400px; height: 500px;">
            <div class="card ${isFlipped ? 'flipped' : ''}" id="card">
              <div class="card-face card-front" style="background: ${config.card_color || defaultConfig.card_color};">
                <div style="font-size: 6rem; margin-bottom: 1rem;">${currentLetter.image}</div>
                <div class="letter-display" style="font-size: 9rem; font-weight: bold; color: ${config.text_color || defaultConfig.text_color};">${currentLetter.letter}</div>
                <div class="letter-name" style="font-size: 1.5rem; font-weight: 600; margin-top: 1rem; color: ${config.text_color || defaultConfig.text_color};">?</div>
              </div>
              
              <div class="card-face card-back" style="background: ${config.card_color || defaultConfig.card_color}; padding: 2rem;">
                <div style="font-size: 6rem; margin-bottom: 1rem;">${currentLetter.image}</div>
                <div class="letter-display" style="font-size: 9rem; font-weight: bold; color: ${config.text_color || defaultConfig.text_color};">${currentLetter.letter}</div>
                <div class="letter-name" style="font-size: 1.5rem; font-weight: 600; margin-top: 1rem; color: ${config.text_color || defaultConfig.text_color};">${currentLetter.name}</div>
                <div class="transliteration" style="font-size: 1.25rem; color: ${config.text_color || defaultConfig.text_color}; opacity: 0.8; margin-top: 0.5rem;">"${currentLetter.transliteration}"</div>
              </div>
            </div>
          </div>
          
          <button id="flip-btn" style="background: ${config.primary_button_color || defaultConfig.primary_button_color}; color: white; padding: 1rem 2rem; border-radius: 1rem; font-size: 1.125rem; font-weight: 600; border: none; cursor: pointer; margin-bottom: 1.5rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); transition: transform 0.2s;">
            ${config.flip_button_text || defaultConfig.flip_button_text}
          </button>
          
          <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
            <button id="prev-btn" style="background: ${config.secondary_button_color || defaultConfig.secondary_button_color}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.75rem; font-size: 1rem; font-weight: 600; border: none; cursor: pointer; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); transition: transform 0.2s;">
              ${config.prev_button_text || defaultConfig.prev_button_text}
            </button>
            <button id="next-btn" style="background: ${config.secondary_button_color || defaultConfig.secondary_button_color}; color: white; padding: 0.75rem 1.5rem; border-radius: 0.75rem; font-size: 1rem; font-weight: 600; border: none; cursor: pointer; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); transition: transform 0.2s;">
              ${config.next_button_text || defaultConfig.next_button_text}
            </button>
          </div>
          
          <p id="progress-text" style="font-weight: 600; color: ${config.text_color || defaultConfig.text_color}; font-size: 1.125rem;">Letter ${currentIndex + 1} of ${arabicLetters.length}</p>
        </div>
      `;
      
      document.getElementById('flip-btn').addEventListener('click', flipCard);
      document.getElementById('next-btn').addEventListener('click', nextCard);
      document.getElementById('prev-btn').addEventListener('click', prevCard);
      
      const buttons = [document.getElementById('flip-btn'), document.getElementById('next-btn'), document.getElementById('prev-btn')];
      buttons.forEach(btn => {
        btn.addEventListener('mouseenter', function() {
          this.style.transform = 'scale(1.05)';
        });
        btn.addEventListener('mouseleave', function() {
          this.style.transform = 'scale(1)';
        });
      });
    }

    function flipCard() {
      isFlipped = !isFlipped;
      const card = document.getElementById('card');
      card.classList.toggle('flipped');
      card.classList.add('bounce');
      setTimeout(() => card.classList.remove('bounce'), 500);
    }

    function nextCard() {
      currentIndex = (currentIndex + 1) % arabicLetters.length;
      isFlipped = false;
      renderApp();
      onConfigChange(window.elementSdk.config);
    }

    function prevCard() {
      currentIndex = (currentIndex - 1 + arabicLetters.length) % arabicLetters.length;
      isFlipped = false;
      renderApp();
      onConfigChange(window.elementSdk.config);
    }

    window.elementSdk.init({
      defaultConfig,
      onConfigChange,
      mapToCapabilities: (config) => ({
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.card_color || defaultConfig.card_color,
            set: (value) => {
              config.card_color = value;
              window.elementSdk.setConfig({ card_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.primary_button_color || defaultConfig.primary_button_color,
            set: (value) => {
              config.primary_button_color = value;
              window.elementSdk.setConfig({ primary_button_color: value });
            }
          },
          {
            get: () => config.secondary_button_color || defaultConfig.secondary_button_color,
            set: (value) => {
              config.secondary_button_color = value;
              window.elementSdk.setConfig({ secondary_button_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            config.font_size = value;
            window.elementSdk.setConfig({ font_size: value });
          }
        }
      }),
      mapToEditPanelValues: (config) => new Map([
        ["game_title", config.game_title || defaultConfig.game_title],
        ["instruction_text", config.instruction_text || defaultConfig.instruction_text],
        ["flip_button_text", config.flip_button_text || defaultConfig.flip_button_text],
        ["next_button_text", config.next_button_text || defaultConfig.next_button_text],
        ["prev_button_text", config.prev_button_text || defaultConfig.prev_button_text]
      ])
    });

    renderApp();
    onConfigChange(window.elementSdk.config);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b3529b7d0cde0b5',t:'MTc2NjYzMjQxMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>